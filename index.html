<!DOCTYPE html>
<html lang="ja">
<head>
  <title>Ventus Wallet(ウェンタスウォレット)</title>
  <link rel="stylesheet" href="./css/BGimg_ventus.css" type="text/css" media="all" id="switchCSS" />
  <link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.5.0/css/bootstrap.min.css" integrity="sha384-9aIt2nRpC12Uk9gS9baDl411NQApFmC26EwAOH8WgZl5MYYxFfc+NcPb1dKGj7Sk" crossorigin="anonymous">
  <!--<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/boxicons@latest/css/boxicons.min.css"> -->
  <link rel="stylesheet" href="style.css" type="text/css">
  <meta http-equiv="content-type" charset="UTF-8">
  <meta name="viewport" content="width=device-width,initial-scale=1.0">
  
  
  <script src="js/jquery-3.6.3.min.js"></script>
  <script src="js/js.cookie.js"></script>
  <script>
    // CSSのURLを定義
    var defaulturl= './css/BGimg_ventus.css'
    var cyberpunkurl= './css/BGimg_cyberpunk.css';
    var seaurl= './css/BGimg_sea.css';
// 画面表示時のCSSの読み込み設定
    $(document).ready(
        function() {
            if (!Cookies.get('cookieCSS')) {
                // クッキー未登録であればデフォルト選択
                    $("#selectCSS").val("ventus");
            } else if (Cookies.get('cookieCSS') == 'ventus') {
                // クッキーにデフォルト登録であればデフォルト選択
                    $("#selectCSS").val("ventus");
                // defaultCSSを読み込む
                    $("#switchCSS").attr("href" , defaulturl);
            } else if (Cookies.get('cookieCSS') == 'cyberpunk') {
                    $("#selectCSS").val("cyberpunk");
                    $("#switchCSS").attr("href" , cyberpunkurl);
            } else if (Cookies.get('cookieCSS') == 'sea') {
                    $("#selectCSS").val("sea");
                    $("#switchCSS").attr("href" , seaurl);
            }
        }
    );
// セレクトボックス操作時の設定
    $(function(){
        $('#selectCSS').change(function(){
            // セレクトボックスのvalueを取得
                var val = $(this).val();
            // valueによって読み込むCSSを変更する
                if (val == "ventus") {
                    cssurl = defaulturl;
                } else if (val == "cyberpunk") {
                    cssurl = cyberpunkurl;
                } else if  (val == "sea") {
                     cssurl = seaurl;
                }         
            // 選択結果をクッキーに登録する
                Cookies.set('cookieCSS', val);
            // CSSを読み込む
                $("#switchCSS").attr("href" , cssurl);
        });
    });     
  </script>
</head>
<body> 

 
  <div class="SSS_link">
       <a href="./Terms_of_use.html" target="_blank">利用規約</a>
       <a href="https://note.com/mikun_nem/n/n5c21f4af8930/" target="_blank">/ 使い方</a>
       <div style="display: inline-block; _display: inline;" id="explorer"></div>
       <a href="https://docs.sss-symbol.com/ja/" target="_blank">/ SSS_Extension /</a>
       <a href="https://note.com/mahorobart/n/nd5f226887c2a" target="_blank">Ventusについて</a>
       <a href="https://github.com/mikunNEM/Ventus_Wallet" target="_blank">/ GitHub </a> 
       <a href="https://symbol-community.com" target="_blank">/ Symbol_Community_Web /</a>
       <select id="selectCSS">
           <option value="ventus">Ventus</option>
           <option value="cyberpunk">CyberPunk</option>
           <option value="sea">Sea</option>
       </select>
  </div> 

  
  <h1>Ventus Wallet</h1>
  <h3><div id="netType"></div></h3>  
  <div class="wrapper">
      <div class="left">
        <div class="account-card">
            <h2>Account Info</h2>
            <hr>
          <div class="container" style="color:#2f4f4f">   
            <div id="wallet-addr"></div>
          </div>
          <div class="container" style="color:blue;">
            <div id="wallet-xym"></div>
          </div>
        </div>
        
        <div class="sender-card">
          <h2>Send</h2>
          <hr>
          <a href="https://bit.ly/41uG3VR" target="_blank"><p style="text-align:right"><b>📖SYMBOLタウンリスト　</b></p></a>
          <div class="textfiled-wrapper">
            <div>宛　　先　(To:)</div>
            <input type="text" id="form-addr" class="textfiled" placeholder="　　　　 address  or  alias / namespace"/>
          </div>
          
          <div class="textfiled-wrapper">
            <div>モザイク　(Mosaic)</div>
            <select id="form-mosaic_ID" name="form-mosaic_ID" class="textfiled"></select>         <!--   セレクトボックス     -->
          </div>
          
          <div class="textfiled-wrapper">
            <div>数　　量　(Amount)</div>
            <input type="text" id="form-amount" class="textfiled" style="line-height:1"/>
          </div>
        
          <div class="textfiled-wrapper">
            <div>メッセージ(Message)</div>
            <input type="text" id="form-message" class="textfiled" style="line-height:3"/>
          </div>  
        
          <div class="textfiled-wrapper">
            <div></div>
            <select id="form-enc">
            <option value="0">Plain message　　　(平文)</option>
            <option value="1">Encrypted message (暗号化)</option>       
            </select>
          </div>
          
          <div class="textfiled-wrapper">
            <div>最大手数料 / maxFee / aggregateTx (x20)</div>
            <select id="form-maxfee">
              <option value="0.02">0.02 xym (slow)</option>
              <option value="0.04">0.04 xym</option>
              <option value="0.07">0.07 xym</option>
              <option value="0.10"> 0.10 xym (fast)</option>
            </select>
          </div> 
   
         <label>
             <input type="file" id="upload-file">ファイルを選択(.csv)       <!-- address ファイルを選択 --> 
         </label>
         <div style="display: inline-block; _display: inline;"> 
           <p1>選択されていません</p1>
         </div>
          <script>           
              const input = document.getElementById('upload-file');
              //FileReaderの定義
              const reader = new FileReader();
              let address1 = [];
              let address2 = [];
              let file;
              // 選択したファイルのファイル名を出力する
                       $('input').on('change', function () {
                          let file = $(this).prop('files')[0];
                          $('p1').text(file.name);
                          address1.length = 0;
                          address2.length = 0; 
                       });
                        
              input.addEventListener('change', (e) => {
                  const file1 = e.target.files[0];
                  console.log("file1=",file1);
                    if (typeof file1 === "undefined"){
                       address1.length = 0;
                       address2.length = 0; // ファイル選択が取り消された場合、配列を削除
                       $('p1').text("選択されていません"); 
                       file = file1;
                    }
                
                  //ファイルの種類を絞る
                  if (file1.type === 'text/csv') {                    　                   
                     reader.onload = () => {
                       //console.log(reader.result);
                       address2 = reader.result.split(/\r\n|\n/);   //splitで改行ごとに配列化
                       
                        for (let i = 0; i < address2.length; ++i) {  
                             let cells = address2[i].split(",");    //カンマごとに配列化 (名前とアドレスを分ける)
                             address1[i] = cells[1];                //アドレスだけを格納
                       }
                       
                       console.log("address1=",address1);
                     }
                     reader.readAsText(file1);
                  }
              });        
          </script>
         
          <div id="button-haichi">
             <input type="button" onclick="handleSSS();" value="Send" class="button-sign"/>
          </div>                    
        </div>
    
         <div id="version"></div>
         <button id="js-show-popup">Mosaic</button>
         <button id="js-show-popup2">Namespace</button>
      </div>
      <div class="right">
        <div class="tx-card">
          <h2>Tx History</h2>        
            
            <div style="text-align: right">
            <div style="display: inline-block; _display: inline;">Page:</div>
              
              <select id="page_num1" onchange="select_Page();">
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10">10</option>
              </select> 
            </div> 
     
          <hr>
          <div id="wallet-transactions"></div>   <!--  トランザクション履歴   --> 
                   
        </div>
      </div>
  </div>

  <!--   popup  ユニコーン       -->
  <div id="popup" class="popup">
    <div class="popup-inner">
      <div class="img"><img src="unicorn2.gif" alt="ポップアップ画像"></div>
    </div><!-- .popup-inner -->
    <div id="bg-black" class="bg-black"></div>
  </div><!-- #popup -->

<!--    popup  モザイク作成   -->
  <div id="js-popup2" class="popup2">
    <div class="popup2-inner">
      <div class="close-btn" id="js-close-btn"><i class="fas fa-times"></i></div>
      <div class="Form">
        <h4>Mosaic Parameter</h4>
        <div class="Form-Item">
          <p class="Form-Item-Label"><span class="Form-Item-Label-Required">発行量</span></br><small>(Supply Amount)</small></p>
          <input type="text" class="Form-Item-Input" id="SupplyAmount" placeholder="　1 〜 8999999999000000">
        </div>
        <div class="Form-Item">
          <p class="Form-Item-Label"><span class="Form-Item-Label-Required">有効期限</span><small>&nbsp;&nbsp;　約30秒 = 1 (Block)</br>　&nbsp;(Duration)　　　　無期限 = 0</small></p>
          <input type="text" class="Form-Item-Input" id="Duration1" placeholder=" 　0 〜 315360000 (Block)">
        </div>
        <div class="Form-Item">
          <p class="Form-Item-Label"><span class="Form-Item-Label-Required">可分性</span></br><small>　(Divisibility)　　　小数点以下の桁数</small></p>
         <div class="Form-Item-Input" style="text-align: center">
          <select class="divisibility" id="Divisibility">
            <option value="0">0</option>
            <option value="1">1</option>
            <option value="2">2</option>
            <option value="3">3</option>
            <option value="4">4</option>
            <option value="5">5</option>
            <option value="6">6</option>
          </select></div>
        </div>
        <div class="Form-Item">
          <p class="Form-Item-Label"><span class="Form-Item-Label-Required">制限可</span></br><small>&nbsp;(Restrictable)</small></p>
          <div class="toggle3">
            <input type="checkbox" name="check3" value="Restrictable"  id="Restrictable" />
          </div>
        </div>
        <div class="Form-Item">
          <p class="Form-Item-Label"><span class="Form-Item-Label-Required">発行量可変</span></br><small>(Supply Mutable)</small></p>
          <div class="toggle1">
            <input type="checkbox" name="check1" value="Supply_M" id="Supply_M" />
          </div>
        </div>
        <div class="Form-Item">  
          <p class="Form-Item-Label"><span class="Form-Item-Label-Required">転送可</span></br><small>&nbsp;(Transferable)</small></p>
          <div class="toggle2">
            <input type="checkbox" name="check2" value="Transferable" id="Transferable" />
          </div>
        </div>
        <div class="Form-Item">  
          <p class="Form-Item-Label"><span class="Form-Item-Label-Required">回収可</span></br><small>　(Revokable)</small></p>
          <div class="toggle4">
            <input type="checkbox" name="check4" value="Revokable" id="Revokable" />
          </div>
        </div>
        <input type="button" onclick="Onclick_mosaic();" class="Form-Btn" id="js-popup2" value="作成"/><i class="fas fa-times"></i>
      </div>
    </div>
    <div class="black-background" id="js-black-bg1"></div>
  </div>

<!-- -----------------------------------------   -->

<!--    popup  namespace 作成   -->
<div id="js-popup3" class="popup3">
  <div class="popup3-inner">
    <div class="close-btn" id="js-close-btn"><i class="fas fa-times"></i></div>
    <div class="Form">
      <h4>Namespace</h4>
      <div class="Form-Item">
        <p class="Form-Item-Label"><span class="Form-Item-Label-Required">取得ネームスーペース</span></br></p>
        <input type="text" class="Form-Item-Input_N" id="Namespace" placeholder="">
      </div>
      <div class="Form-Item">
        <p class="Form-Item-Label"><span class="Form-Item-Label-Required">有効期限</span><small></br>　&nbsp;(Duration)&nbsp;&nbsp;　約30秒 = 1 (Block)</small></p>
        <input type="text" class="Form-Item-Input_N" id="Duration2" placeholder=" 　86400 〜 5256000 (Block)">
      </div>
     
      
      <input type="button" onclick="Onclick_Namespace();" class="Form-Btn" id="js-popup3" value="作成"/><i class="fas fa-times"></i>
    </div>
  </div>
  <div class="black-background" id="js-black-bg2"></div>
</div>

<!-- -----------------------------------------   -->


<script>

  function popupImage() {  //  モザイク　ポップアップ
  var popup2 = document.getElementById('js-popup2');
  if(!popup2) return;
  var blackBg = document.getElementById('js-black-bg1');
  var closeBtn = document.getElementById('js-close-btn');
  var showBtn = document.getElementById('js-show-popup');

  closePopUp(blackBg);
  closePopUp(closeBtn);
  closePopUp(showBtn);
  function closePopUp(elem) {
    if(!elem) return;
    elem.addEventListener('click', function() {
      popup2.classList.toggle('is-show');
    });
  }
}
popupImage();



function popupImage3() {  //  Namespace　ポップアップ
  var popup3 = document.getElementById('js-popup3');
  if(!popup3) return;
  var blackBg = document.getElementById('js-black-bg2');
  var closeBtn = document.getElementById('js-close-btn');
  var showBtn = document.getElementById('js-show-popup2');

  closePopUp(blackBg);
  closePopUp(closeBtn);
  closePopUp(showBtn);
  function closePopUp(elem) {
    if(!elem) return;
    elem.addEventListener('click', function() {
      popup3.classList.toggle('is-show');
    });
  }
}
popupImage3();


//トグルスイッチ
$(".toggle1").on("click", function() {
  $(".toggle1").toggleClass("checked");
  if(!$('input[name="check1"]').prop("checked")) {
    $(".toggle1 input").prop("checked", true);
  } else {
    $(".toggle1 input").prop("checked", false);
  }
});
$(".toggle2").on("click", function() {
  $(".toggle2").toggleClass("checked");
  if(!$('input[name="check2"]').prop("checked")) {
    $(".toggle2 input").prop("checked", true);
  } else {
    $(".toggle2 input").prop("checked", false);
  }
});
$(".toggle3").on("click", function() {
  $(".toggle3").toggleClass("checked");
  if(!$('input[name="check3"]').prop("checked")) {
    $(".toggle3 input").prop("checked", true);
  } else {
    $(".toggle3 input").prop("checked", false);
  }
});
$(".toggle4").on("click", function() {
  $(".toggle4").toggleClass("checked");
  if(!$('input[name="check4"]').prop("checked")) {
    $(".toggle4 input").prop("checked", true);
  } else {
    $(".toggle4 input").prop("checked", false);
  }
});

</script>

 
  <script type="text/javascript" src="https://xembook.github.io/nem2-browserify/symbol-sdk-pack-2.0.4.js"></script>
  <script src="https://cdnjs.cloudflare.com/ajax/libs/sweetalert/2.1.2/sweetalert.min.js"></script>
  <script type="text/javascript" src="script.js"></script>
</body>
</html>
